# Exercice 4 : Bonus - DÃ©fis Gymnase2000

## Questions bonus

Combinez tous les concepts pour rÃ©soudre des problÃ¨mes complexes sur Gymnase2000. Ã€ faire uniquement si vous avez le temps !

**1. CrÃ©er une "hiÃ©rarchie de compÃ©tence" : lister qui peut enseigner Ã  qui**

Affichez les paires (entraÃ®neur, apprenant) si l'entraÃ®neur a un niveau supÃ©rieur au apprenant dans un sport.

<details>
<summary>ğŸ’¡ Indice</summary>

Joignez `Entrainer` (entraÃ®neurs) avec `Jouer` (apprenants) sur le sport, puis comparez les niveaux.
</details>

**2. Identifier les "super-athlÃ¨tes" : sportifs ayant tous les niveaux dans au moins un sport**

<details>
<summary>ğŸ’¡ Indice</summary>

Groupez par sportif et sport, comptez les niveaux distincts (Jouer, Entrainer, Arbitrer), cherchez oÃ¹ COUNT = 3.
</details>

**3. Analyser la "santÃ©" du gymnase : quelle capacitÃ© reste disponible par jour?**

Calculez la somme des MaxSportifs par jour, comparez avec les inscriptions rÃ©elles.

<details>
<summary>ğŸ’¡ Indice</summary>

Vous aurez besoin du jour de la sÃ©ance (Horaire). Calculez SUM(MaxSportifs) vs COUNT(sportifs inscrits).
</details>

**4. DÃ©tecter les "singletons" : sportifs de jour et entraÃ®neurs de nuit (ou vice-versa)**

<details>
<summary>ğŸ’¡ Indice</summary>

Analysez l'Horaire des sÃ©ances oÃ¹ le sportif participe vs entraÃ®ne, cherchez les conflits.
</details>

**5. CrÃ©er une "force de frappe" : pour chaque sport, Ã©valuer le ratio entraÃ®neurs/participants**

<details>
<summary>ğŸ’¡ Indice</summary>

Comptez les entraÃ®neurs et les pratiquants par sport, puis divisez.
</details>

**6. Identifier les "apprentissages croisÃ©s" : sportifs entraÃ®nÃ©s par un peer (de mÃªme niveau) plutÃ´t que par un supÃ©rieur**

<details>
<summary>ğŸ’¡ Indice</summary>

Comparez les niveaux de Jouer et Entrainer pour les mÃªmes pairs (NumLicence entraÃ®neur/apprenant, NumSport).
</details>

**7. Analyser les "trous" : quelles sÃ©ances ont une participation trÃ¨s faible?**

Affichez les sÃ©ances avec moins de 20% de leur capacitÃ© utilisÃ©e.

<details>
<summary>ğŸ’¡ Indice</summary>

Comptez les participants rÃ©els vs MaxSportifs, calculez le ratio.
</details>

**8. CrÃ©er un "tournoi imaginaire" : Ã©quipes par niveau + sport + gymnase pour favoriser les matchs Ã©quitables**

<details>
<summary>ğŸ’¡ Indice</summary>

Groupez les sportifs par (Sport, Niveau, Gymnase), comptez les participants, affichez les groupes >= 2.
</details>

**9. Identifier les "maÃ®tres": sportifs entraÃ®nant le plus de pairs (transitifs) dans la mÃªme discipline**

Utilisez une transitivitÃ© d'entraÃ®nement (graphe d'influence).

<details>
<summary>ğŸ’¡ Indice</summary>

Utilisez l'auto-jointure sur `Entrainer` pour tracer les relations indirectes.
</details>

**10. Analyser les "spÃ©cialisations cachÃ©es" : sportifs pratiquant plusieurs sports mais excelle dans un seul**

Quelqu'un qui joue 5 sports mais arbitre et entraÃ®ne seulement 1 = spÃ©cialiste cachÃ©.

<details>
<summary>ğŸ’¡ Indice</summary>

Comptez sÃ©parÃ©ment les rÃ´les par sport pour chaque sportif, trouvez les Ã©carts.
</details>

## RequÃªte de synthÃ¨se complÃ¨te

Voici une requÃªte qui combine tout ce que vous avez appris :

```sql
-- Rapport d'activitÃ© mensuel
SELECT 
    strftime('%Y-%m', co.DateCommande) AS Mois,
    COUNT(DISTINCT co.IdClient) AS NombreClients,
    COUNT(co.IdCommande) AS NombreCommandes,
    COUNT(d.IdProduit) AS NombreArticles,
    SUM(d.Quantite) AS QuantiteTotale,
    SUM(d.Quantite * d.PrixUnitaire) AS ChiffreAffaires,
    ROUND(AVG(d.Quantite * d.PrixUnitaire), 2) AS PrixMoyen,
    ROUND(SUM(d.Quantite * d.PrixUnitaire) / COUNT(co.IdCommande), 2) AS PanierMoyen
FROM Commandes co
JOIN Details d ON co.IdCommande = d.IdCommande
GROUP BY strftime('%Y-%m', co.DateCommande)
ORDER BY Mois DESC;
```

## Conclusion

Continuez Ã  pratiquer et Ã  explorer SQL. Les compÃ©tences en requÃªtage et gestion de bases de donnÃ©es sont essentielles en informatique !

**Bonne chance pour la suite !**
